
<!doctype html>
<html>

<head>
    <title>Babylon.js</title>
    <script type='text/javascript' src='./js/babylon.1.13.js'></script>
    <style type='text/css'>
        html, body, div, canvas {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        #waitLabel {
            position: absolute;
            width: 100%;
            height: 100%;
            font-size: 40px;
            text-align: center;
            top: 50%;
            margin-top: -20px;
            font-family: Arial;
            font-weight: bold;
        }
    </style>
</head>

<body>
<input id="button" type="button" onclick="dochange()" value="move"/>
    <canvas id='canvas'></canvas>

    <script type='text/javascript'>
        var box = {};
        function dochange(){

            var animationBox = new BABYLON.Animation("tutoAnimation", "position", 30, BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
            var keys = [];
            //At the animation key 0, the value of scaling is "1"
            keys.push({
                frame: 0,
                value: box.m.position
            });
            keys.push({
                frame: 90,
                value: new BABYLON.Vector3(box.m.position.x+100,box.m.position.y,box.m.position.x)
            });


            box.m.animations.push(animationBox);
            //Pluging the sequence of keys to the animation object
            animationBox.setKeys(keys);

            if(box.m._animationBox){
                box.m._animationBox.setKeys(keys);
            }else{
                box.m._animationBox = animationBox;
            }
            scene.beginAnimation(box.m, 0, 90, false);
            scene.beginAnimation(box.s[0], 0, 100, false, 1.0);
        }
        var canvas = document.getElementById('canvas');
        var engine = new BABYLON.Engine(canvas, true);

        // Babylon
        var engine = new BABYLON.Engine(canvas, true);

        //Creating scene (in "scene_tuto.js")
        //Creation of the scene
        scene = new BABYLON.Scene(engine);

        var plane = BABYLON.Mesh.CreateBox("Ground", 1, scene);
            plane.position = new BABYLON.Vector3(0,0,0);
            plane.scaling = new BABYLON.Vector3(100, 1, 1);

        var box = BABYLON.Mesh.CreateBox("Box", 6.0, scene);
            box.position = new BABYLON.Vector3(0,0,0);
        var box2 = BABYLON.Mesh.CreateBox("Box", 6.0, scene);
            box2.position = new BABYLON.Vector3(10,0,0);

        //Adding of the light on the scene
        var light = new BABYLON.PointLight("Omni", new BABYLON.Vector3(10, 10, -30), scene);

       // camera = new BABYLON.ArcRotateCamera("Camera", 0, 0, 400, new BABYLON.Vector3(0,0,0), scene);
        //camera = new BABYLON.FreeCamera("FreeCamera", new BABYLON.Vector3(0, 1, 1000), scene);
        //camera.lockedtarget = new  new BABYLON.Vector3(0, 0, 0);
        //camera.target = new BABYLON.Vector3(0,0,0);
        camera = new BABYLON.FreeCamera("FreeCamera", new BABYLON.Vector3(0, 0, 400), scene);
        camera.setTarget( new BABYLON.Vector3(0,0,0));

        scene.activeCamera = camera;
        // Then attach the activeCamera to the canvas.
        scene.activeCamera.attachControl(canvas);

        engine.runRenderLoop(function () {
            scene.render();
        });

        BABYLON.SceneLoader.ImportMesh("", "res/", "6.babylon?a="+new Date(), scene, function (newMeshes, particleSystems, skeletons) {
            var dude = newMeshes[0];
            box.m = dude;
            box.s = skeletons;
            //dude.scaling =   new BABYLON.Vector3(0.01,0.01,0.01);
            //dude.scaling.x = 0.01;
            dude.position = new BABYLON.Vector3(100, 0, 0);

           // skeletons[0].

         //scene.beginAnimation(skeletons[0], 0, 100, false, 1.0);
        });
    </script>
</body>
</html>